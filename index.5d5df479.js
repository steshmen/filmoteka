async function t(t){const e=await fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=0d7d20afff25839c3a8a445daa632bca&language=en-US`);return await e.json()}async function e(t,e=1){const a=await fetch(`https://api.themoviedb.org/3/search/movie?api_key=0d7d20afff25839c3a8a445daa632bca&query=${t}&language=en-US`);return await a.json()}function a(t){return t.filter((t=>t.backdrop_path)).map((({title:t,release_date:e,poster_path:a,id:n})=>`\n        <li class="film-list__item">\n          <img src="https://image.tmdb.org/t/p/w500${a}" alt="${t}" class="film-list__img" data-id="${n}">\n          <h2 class="film-list__title">${t}</h2>\n          <p class="film-list__text">${e}</p>\n        </li>\n        `)).join("")}function n({overview:t,popularity:e,poster_path:a,original_title:n,vote_average:s,vote_count:i,release_date:l}){return`\n        <img src="https://image.tmdb.org/t/p/w500${a}" class="modal-img" alt="${n}" loading="lazy">\n        <div class="modal-content-box">\n            <h2 class="modal-title">${n}</h2>\n\n            <ul class="modal-list">\n                <li class="modal-list__item">\n                    <p class="modal-list__text">Vote / Votes</p>\n                    <span class="modal-list__vote">${s}</span>\n                    <span class="modal-list__value">${i}</span>\n                </li>\n\n                <li class="modal-list__item">\n                    <p class="modal-list__text">Popularity</p>\n                    <span class="modal-list__value">${e}</span>\n                </li>\n\n                <li class="modal-list__item">\n                    <p class="modal-list__text">Original Title</p>\n                    <span class="modal-list__value">${n}</span>\n                </li>\n\n                <li class="modal-list__item">\n                    <p class="modal-list__text">Release date</p>\n                    <span class="modal-list__value">${l}</span>\n                </li>\n            </ul>\n            <h3 class="modal-sub-title">About</h3>\n            <p class="modal-text">${t}</p>\n        </div>\n    `}const s=document.querySelector(".film-list"),i=document.querySelector(".backdrop"),l=document.querySelector(".modal-close__btn"),o=document.querySelector(".modal-box"),c=document.querySelector(".header-form"),d=document.querySelector(".header-form__text"),r=document.querySelectorAll(".modal-btn"),u=document.querySelector("button[data-watched]"),m=document.querySelector("button[data-queue]");function p(){i.classList.add("is-hidden"),r.forEach((t=>{t.removeAttribute("data-id")})),window.removeEventListener("keydown",f)}function f(t){console.log(t.code),"Escape"===t.code&&p()}d.style.visibility="hidden",c.addEventListener("submit",(function(t){t.preventDefault(),d.style.visibility="hidden";e(t.currentTarget.elements.searchFilm.value).then((t=>{const e=t.results;if(!e[0])return void(d.style.visibility="visible");s.innerHTML="";const n=a(e);s.insertAdjacentHTML("beforeend",n)})).catch(console.log)})),s.addEventListener("click",(function(e){window.addEventListener("keydown",f);const a=Number(e.target.dataset.id);if(!a)return;i.classList.remove("is-hidden"),r.forEach((t=>{t.setAttribute("data-id",a)})),t(a).then((t=>{const e=n(t);o.innerHTML=e}))})),l.addEventListener("click",p),m.addEventListener("click",(function(t){const e=Number(t.target.dataset.id),a=JSON.parse(localStorage.getItem("queque"));if(!a){const t=[];return t.push(e),localStorage.setItem("queque",JSON.stringify(t)),void p()}if(!a.includes(e))return a.push(e),localStorage.setItem("queque",JSON.stringify(a)),void p();p()})),u.addEventListener("click",(function(t){const e=Number(t.target.dataset.id),a=JSON.parse(localStorage.getItem("watched"));if(!a){const t=[];return t.push(e),localStorage.setItem("watched",JSON.stringify(t)),void p()}if(!a.includes(e))return a.push(e),localStorage.setItem("watched",JSON.stringify(a)),void p();p()})),i.addEventListener("click",(t=>{"backdrop"===t.target.className&&i.classList.add("is-hidden")})),async function(){const t=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=0d7d20afff25839c3a8a445daa632bca&language=en-US");return await t.json()}().then((t=>{const e=JSON.stringify(t.genres);localStorage.setItem("genres",e)})).catch((t=>console.log(t))),async function(t=1){const e=await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=0d7d20afff25839c3a8a445daa632bca&page=${t}`);return await e.json()}().then((t=>{const e=a(t.results);s.insertAdjacentHTML("beforeend",e)})).catch((t=>console.log(t)));
//# sourceMappingURL=index.5d5df479.js.map
