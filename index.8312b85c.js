!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},a=e.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in n){var a=n[e];delete n[e];var l={id:e,exports:{}};return t[e]=l,a.call(l.exports,l,l.exports),l.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequired7c6=a);var l=a("sRYpV");function i(e){return e.filter((function(e){return e.backdrop_path})).map((function(e){var t=e.title,n=e.release_date,a=e.poster_path,l=e.id;return'\n        <li class="film-list__item">\n          <img src="https://image.tmdb.org/t/p/w500'.concat(a,'" alt="').concat(t,'" class="film-list__img" data-id="').concat(l,'">\n          <h2 class="film-list__title">').concat(t,'</h2>\n          <p class="film-list__text">').concat(n,"</p>\n        </li>\n        ")})).join("")}var o="watched",s="queque",c=document.querySelector(".film-list"),r=document.querySelector(".backdrop"),d=document.querySelector(".modal-close__btn"),u=document.querySelector(".modal-box"),m=document.querySelector(".header-form"),f=document.querySelector(".header-form__text"),p=document.querySelectorAll(".modal-btn"),v=document.querySelector("button[data-watched]"),_=document.querySelector("button[data-queue]");function g(){r.classList.add("is-hidden"),p.forEach((function(e){e.removeAttribute("data-id")})),window.removeEventListener("keydown",h)}function h(e){console.log(e.code),"Escape"===e.code&&g()}f.style.visibility="hidden",m.addEventListener("submit",(function(e){e.preventDefault(),f.style.visibility="hidden";var t=e.currentTarget.elements.searchFilm.value;(0,l.fetchSearch)(t).then((function(e){var t=e.results;if(t[0]){c.innerHTML="";var n=i(t);c.insertAdjacentHTML("beforeend",n)}else f.style.visibility="visible"})).catch(console.log)})),c.addEventListener("click",(function(e){window.addEventListener("keydown",h);var t=Number(e.target.dataset.id);if(!t)return;r.classList.remove("is-hidden"),p.forEach((function(e){e.setAttribute("data-id",t)})),(0,l.fetchFilmById)(t).then((function(e){var t,n,a,l,i,o,s,c,r=(n=(t=e).overview,a=t.popularity,l=t.poster_path,i=t.original_title,o=t.vote_average,s=t.vote_count,c=t.release_date,'\n        <img src="https://image.tmdb.org/t/p/w500'.concat(l,'" class="modal-img" alt="').concat(i,'" loading="lazy">\n        <div class="modal-content-box">\n            <h2 class="modal-title">').concat(i,'</h2>\n\n            <ul class="modal-list">\n                <li class="modal-list__item">\n                    <p class="modal-list__text">Vote / Votes</p>\n                    <span class="modal-list__vote">').concat(o,'</span>\n                    <span class="modal-list__value">').concat(s,'</span>\n                </li>\n\n                <li class="modal-list__item">\n                    <p class="modal-list__text">Popularity</p>\n                    <span class="modal-list__value">').concat(a,'</span>\n                </li>\n\n                <li class="modal-list__item">\n                    <p class="modal-list__text">Original Title</p>\n                    <span class="modal-list__value">').concat(i,'</span>\n                </li>\n\n                <li class="modal-list__item">\n                    <p class="modal-list__text">Release date</p>\n                    <span class="modal-list__value">').concat(c,'</span>\n                </li>\n            </ul>\n            <h3 class="modal-sub-title">About</h3>\n            <p class="modal-text">').concat(n,"</p>\n        </div>\n    "));u.innerHTML=r}))})),d.addEventListener("click",g),_.addEventListener("click",(function(e){var t=Number(e.target.dataset.id),n=JSON.parse(localStorage.getItem(s));if(!n){var a=[];return a.push(t),localStorage.setItem(s,JSON.stringify(a)),void g()}if(!n.includes(t))return n.push(t),localStorage.setItem(s,JSON.stringify(n)),void g();g()})),v.addEventListener("click",(function(e){var t=Number(e.target.dataset.id),n=JSON.parse(localStorage.getItem(o));if(!n){var a=[];return a.push(t),localStorage.setItem(o,JSON.stringify(a)),void g()}if(!n.includes(t))return n.push(t),localStorage.setItem(o,JSON.stringify(n)),void g();g()})),r.addEventListener("click",(function(e){"backdrop"===e.target.className&&r.classList.add("is-hidden")})),(0,l.fetchGenre)().then((function(e){var t=JSON.stringify(e.genres);localStorage.setItem("genres",t)})).catch((function(e){return console.log(e)})),(0,l.fetchApi)().then((function(e){var t=i(e.results);c.insertAdjacentHTML("beforeend",t)})).catch((function(e){return console.log(e)}))}();
//# sourceMappingURL=index.8312b85c.js.map
